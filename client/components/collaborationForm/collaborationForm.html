<template name="collaborationForm">
  {{#autoForm id="addCollaboration" doc=doc collection="Collaboration" validation="submit" type=type fields="isUnlisted,name,description,collaborators,requiresAdministratorApprovalToJoin,administrators,invitations" schema=Schemas.collaboration}}
      <fieldset>
      {{> afQuickField name="name"}}
      {{> afQuickField name="description"}}
      <small>
      {{> afQuickField name="isUnlisted"  label-style="display:none;" type="boolean-radios"
           value=isUnlisted
           trueLabel="This is an unlisted collaboration and will not appear in the directory to non-collaborators."
           falseLabel="This is a listed collaboration, only collaborators can see its contents."}}
      <br>
      </small>

      {{> bump name="collaborators"  class="collaboratorListClass collaboratorInitWithSelf"  }}
      {{#if afFieldIsInvalid name='collaborators'}}
          <span class="help-block">{{afFieldMessage name=''}}</span>
      {{/if}}
      {{> bump name="administrators" class="collaboratorListClass collaboratorInitWithSelf" }}


      {{> afQuickField name="requiresAdministratorApprovalToJoin" label-style="display:none;" type="boolean-radios"
           value=requiresAdministratorApprovalToJoin
           falseLabel="Users may add themselves"
           trueLabel="Users require administrator approval"}}

      {{> bump name="invitations"  class="collaboratorListClass"   }}

      <button type="submit" class="btn btn-primary"> Submit </button>
      <button type="button" onclick='$(".collapsed").hide()' class="cancelAndGoCollaborationList btn btn-primary"> Cancel </button>
      {{#if doc}}
          <button data-_id={{doc._id}} data-name={{doc.name}} type="button" class="removeCollaboration btn btn-primary" style="background-color:red!important;"> Delete Collaboration </button>
      {{/if}}
      </fieldset>
  {{/autoForm}}
</template>



<template name="bump">
  <div class="panel panel-default">
    {{#with afFieldLabelText name=name}}
    <div class="panel-heading">
      <h3 class="panel-title">{{this}}</h3>
    </div>
    {{/with}}
    <div class="panel-body">
      {{#if afFieldIsInvalid name=name}}
          <span class="help-block">{{afFieldMessage name=name}}</span>
      {{/if}}
      {{> afFieldInput name=name class=class}}
    </div>
  </div>
</template>
